@using Com.Stone.HuLuBlog.Web.Models
@using Com.Stone.HuLuBlog.Infrastructure.Extensions
@model List<ArticleVM>

@if (Model.Count <= 0)
{
    if (!string.IsNullOrEmpty(ViewBag.Keyword))
    {
        <div class="shadow" style="text-align:center;font-size:16px;padding:40px 15px;background:#fff;margin-bottom:15px;">
            未搜索到与【<span style="color: #FF5722;">@ViewBag.Keyword</span>】有关的文章，随便看看吧！
        </div>
    }
    else
    {
        <div class="shadow" style="text-align:center;font-size:16px;padding:40px 15px;background:#fff;margin-bottom:15px;">
            暂时还没有文章，快来写一篇吧！
        </div>
    }
}

@foreach (var article in Model)
{
    <div class="article shadow">
        @if (!article.ImagePath.IsNullOrEmpty())
        {
            <a href="@Url.Action("ArticleDetail","Article",new { articleID = article.ID })" class="article-left">
                <img src="@Url.Content(article.ImagePath)" alt="缩略图" />
            </a>
        }
        <div class="article-right" @if (!article.ImagePath.IsNullOrEmpty()) { <text> style="width:73%" </text> }>
            <div class="article-title">
                <a href="@Url.Action("ArticleDetail","Article",new { articleID = article.ID })">@Html.Raw(article.ArticleTitle)</a>
            </div>
            <div class="article-abstract">
                @Html.Raw(article.ArticleContent.Length < 500 ? article.ArticleContent : article.ArticleContent.Substring(0, 500))
            </div>
        </div>
        <div class="clear"></div>
        <div class="article-footer">
            <span><i class="fa fa-clock-o"></i>&nbsp;&nbsp;@article.AddDateTime.ToString("yyyy-MM-dd")</span>
            <span class="article-author"><i class="fa fa-user"></i>&nbsp;&nbsp;@article.UserName</span>
            <span><i class="fa fa-tag"></i>&nbsp;&nbsp;<a href="@Url.Action("x","x")">@article.TagName</a></span>
            <span class="article-viewinfo"><i class="fa fa-eye"></i>&nbsp;@article.ReadCount</span>
            <span class="article-viewinfo"><i class="fa fa-commenting"></i>&nbsp;@article.CommentCount</span>
        </div>
    </div>
}

<script>
    var totalCount = @ViewBag.TotalCount   //定义一个变量存储总条目数，供后续分页使用
</script>
